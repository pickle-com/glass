# Glass Enhanced - æ–°åŠŸèƒ½æ¶æ„è®¾è®¡

## ğŸ¯ åŠŸèƒ½éœ€æ±‚æ¦‚è¿°

### æ–°å¢æ ¸å¿ƒåŠŸèƒ½
1. **å®æ—¶ç¿»è¯‘åŠŸèƒ½** - å°†è¯†åˆ«çš„æ–‡å­—å®æ—¶ç¿»è¯‘å¹¶ä»¥åŒè¯­å½¢å¼æ˜¾ç¤º
2. **å…³é”®è¯æå–** - è‡ªåŠ¨è¯†åˆ«å¹¶é«˜äº®æ˜¾ç¤ºé‡è¦æœ¯è¯­å’Œå…³é”®è¯
3. **æœ¯è¯­è§£é‡Š** - ä¸ºå…³é”®è¯æä¾›ç®€çŸ­çš„ä¸Šä¸‹æ–‡ç›¸å…³è§£é‡Š
4. **å®æ—¶æ€ç»´å¯¼å›¾** - æ ¹æ®å¯¹è¯å†…å®¹è‡ªåŠ¨ç”Ÿæˆå’Œæ›´æ–°æ€ç»´å¯¼å›¾
5. **Chromeæµè§ˆå™¨æ‰©å±•** - ç½‘é¡µå†…å®¹å¤„ç†ã€æå–åˆ†æã€é«˜äº®æ ‡è®°å’Œä¸ä¸»ç¨‹åºé€šä¿¡

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„è®¾è®¡

### æ•´ä½“æ¶æ„å›¾
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Enhanced Glass UI                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”‚
â”‚  â”‚ Transcriptionâ”‚  â”‚ Mind Map    â”‚  â”‚ Keywords    â”‚  â”‚ Tr..â”‚
â”‚  â”‚ + Translationâ”‚  â”‚ Viewer      â”‚  â”‚ Panel       â”‚  â”‚ ... â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”‚ 
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚                 â”‚                 â”‚     â†‘
           â–¼                 â–¼                 â–¼     â”‚ Web Data
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                Enhanced Feature Services                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”‚
â”‚  â”‚Translation  â”‚  â”‚MindMap      â”‚  â”‚Keyword      â”‚  â”‚Web  â”‚
â”‚  â”‚Service      â”‚  â”‚Service      â”‚  â”‚Service      â”‚  â”‚Ext..â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚                 â”‚                 â”‚     â†‘
           â–¼                 â–¼                 â–¼     â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Data Processing Pipeline                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Audio/Web Input â†’ Processing â†’ Text Analysis â†’ Features   â”‚
â”‚                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚                     â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚ â”‚
â”‚                     â”‚  â”‚Translateâ”‚ â”‚Keywords â”‚ â”‚Structureâ”‚â”‚ â”‚
â”‚                     â”‚  â”‚ Engine  â”‚ â”‚Extractorâ”‚ â”‚Analyzer â”‚â”‚ â”‚
â”‚                     â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚ â”‚
â”‚                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚                                          â†‘
           â–¼                                          â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Enhanced Data Storage Layer                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”‚
â”‚  â”‚Translation  â”‚  â”‚Keywords &   â”‚  â”‚MindMap      â”‚  â”‚Web  â”‚
â”‚  â”‚Cache        â”‚  â”‚Glossary     â”‚  â”‚Structures   â”‚  â”‚Data â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                      â†‘
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                Chrome Browser Extension                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚Content      â”‚  â”‚Background   â”‚  â”‚Popup        â”‚         â”‚
â”‚  â”‚Scripts      â”‚  â”‚Service      â”‚  â”‚Interface    â”‚         â”‚
â”‚  â”‚(é¡µé¢äº¤äº’)   â”‚  â”‚(é€šä¿¡æ¡¥æ¢)   â”‚  â”‚(ç”¨æˆ·æ§åˆ¶)   â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†‘
                    WebSocket/Native Messaging
```

## ğŸ”§ æ¨¡å—åŒ–è®¾è®¡

### 1. ç¿»è¯‘æœåŠ¡æ¨¡å— (TranslationService)
```javascript
// src/features/translation/translationService.js
class TranslationService {
    constructor() {
        this.providers = ['google', 'deepl', 'azure'];
        this.cache = new Map();
        this.currentLanguagePair = 'en-zh';
    }

    async translateText(text, sourceLang, targetLang) {
        // å®æ—¶ç¿»è¯‘é€»è¾‘
    }

    async detectLanguage(text) {
        // è¯­è¨€æ£€æµ‹
    }

    setLanguagePair(source, target) {
        // è®¾ç½®ç¿»è¯‘è¯­è¨€å¯¹
    }
}
```

### 2. å…³é”®è¯æå–æ¨¡å— (KeywordService)
```javascript
// src/features/keywords/keywordService.js
class KeywordService {
    constructor() {
        this.nlpProcessor = new NLPProcessor();
        this.domainKeywords = new Map();
        this.contextAnalyzer = new ContextAnalyzer();
    }

    async extractKeywords(text, context) {
        // å…³é”®è¯æå–ç®—æ³•
        // 1. TF-IDFç®—æ³•
        // 2. é¢†åŸŸç‰¹å®šè¯æ±‡è¯†åˆ«
        // 3. ä¸Šä¸‹æ–‡ç›¸å…³æ€§åˆ†æ
    }

    async rankKeywords(keywords, context) {
        // å…³é”®è¯é‡è¦æ€§æ’åº
    }

    async updateDomainModel(newKeywords) {
        // åŠ¨æ€æ›´æ–°é¢†åŸŸæ¨¡å‹
    }
}
```

### 3. æœ¯è¯­è§£é‡Šæ¨¡å— (GlossaryService)
```javascript
// src/features/glossary/glossaryService.js
class GlossaryService {
    constructor() {
        this.definitionCache = new Map();
        this.contextualDefinitions = new Map();
        this.aiDefinitionGenerator = new AIDefinitionGenerator();
    }

    async getDefinition(term, context) {
        // è·å–æœ¯è¯­å®šä¹‰
        // 1. ç¼“å­˜æŸ¥æ‰¾
        // 2. ä¸Šä¸‹æ–‡ç›¸å…³å®šä¹‰ç”Ÿæˆ
        // 3. AIé©±åŠ¨çš„è§£é‡Šç”Ÿæˆ
    }

    async generateContextualDefinition(term, conversationContext) {
        // åŸºäºå¯¹è¯ä¸Šä¸‹æ–‡ç”Ÿæˆå®šä¹‰
    }

    async cacheDefinition(term, definition, context) {
        // ç¼“å­˜å®šä¹‰
    }
}
```

### 4. æ€ç»´å¯¼å›¾æœåŠ¡æ¨¡å— (MindMapService)
```javascript
// src/features/mindmap/mindMapService.js
class MindMapService {
    constructor() {
        this.structureAnalyzer = new ConversationStructureAnalyzer();
        this.graphBuilder = new GraphBuilder();
        this.layoutEngine = new D3LayoutEngine();
    }

    async analyzeConversationStructure(transcript) {
        // åˆ†æå¯¹è¯ç»“æ„
        // 1. ä¸»é¢˜è¯†åˆ«
        // 2. é€»è¾‘å…³ç³»åˆ†æ
        // 3. å±‚æ¬¡ç»“æ„æ„å»º
    }

    async updateMindMap(newContent, existingMap) {
        // å®æ—¶æ›´æ–°æ€ç»´å¯¼å›¾
    }

    async generateVisualization(structure) {
        // ç”Ÿæˆå¯è§†åŒ–å›¾è¡¨
    }
}
```

### 5. ç½‘é¡µæ‰©å±•æœåŠ¡æ¨¡å— (WebExtensionService)
```javascript
// src/features/webextension/webExtensionService.js
class WebExtensionService {
    constructor() {
        this.nativeMessaging = new NativeMessagingBridge();
        this.contentProcessor = new WebContentProcessor();
        this.highlightManager = new HighlightManager();
    }

    async setupNativeMessaging() {
        // å»ºç«‹ä¸Chromeæ‰©å±•çš„é€šä¿¡
    }

    async processWebContent(data) {
        // å¤„ç†æ¥è‡ªæµè§ˆå™¨çš„ç½‘é¡µå†…å®¹
        // 1. æ–‡æœ¬æå–å’Œæ¸…ç†
        // 2. ç»“æ„åŒ–å†…å®¹åˆ†æ
        // 3. å…³é”®ä¿¡æ¯è¯†åˆ«
    }

    async sendHighlightCommands(highlights) {
        // å‘é€é«˜äº®æŒ‡ä»¤åˆ°æµè§ˆå™¨æ‰©å±•
    }

    async syncWebData(webData) {
        // åŒæ­¥ç½‘é¡µæ•°æ®åˆ°ä¸»ç¨‹åº
    }
}
```

## ğŸ“Š æ•°æ®æµè®¾è®¡

### æ ¸å¿ƒæ•°æ®æµ
```mermaid
graph TD
    A[Audio Input] --> B[STT Service]
    A1[Web Content Input] --> B1[Web Extension Service]
    
    B --> C[Text Processing Pipeline]
    B1 --> C
    C --> D{Parallel Processing}
    
    D --> E[Translation Service]
    D --> F[Keyword Service]
    D --> G[Glossary Service]
    D --> H[MindMap Service]
    
    E --> I[Translation Cache]
    F --> J[Keyword Database]
    G --> K[Glossary Cache]
    H --> L[MindMap Storage]
    
    I --> M[UI: Bilingual Display]
    J --> N[UI: Keyword Highlights]
    K --> O[UI: Definition Popup]
    L --> P[UI: Interactive MindMap]
    
    F --> Q[Browser Extension: Highlights]
    G --> Q
```

### å®æ—¶æ•°æ®åŒæ­¥
```javascript
// Enhanced Event System
class EnhancedEventBridge extends EventEmitter {
    constructor() {
        super();
        this.translationQueue = [];
        this.keywordQueue = [];
        this.mindmapQueue = [];
    }

    onTranscriptionUpdate(text) {
        // å¹¶è¡Œè§¦å‘æ‰€æœ‰å¢å¼ºåŠŸèƒ½
        this.emit('translation:process', text);
        this.emit('keywords:extract', text);
        this.emit('glossary:analyze', text);
        this.emit('mindmap:update', text);
    }
}
```

## ğŸ› ï¸ æŠ€æœ¯æ ˆé€‰æ‹©

### åç«¯æŠ€æœ¯æ ˆé€‰æ‹©æ–¹æ¡ˆ

#### æ–¹æ¡ˆA: çº¯JavaScript/Node.js (æ¨è)
- **ä¼˜åŠ¿**: ä¸ç°æœ‰Glassä»£ç å®Œå…¨å…¼å®¹ï¼Œæ— éœ€é¢å¤–è¿è¡Œæ—¶
- **ç¿»è¯‘API**: Google Translate API, DeepL API, Azure Translator
- **NLPå¤„ç†**: compromise.js, natural.js
- **å›¾å½¢å¤„ç†**: D3.js, vis.js

#### æ–¹æ¡ˆB: Pythonå¾®æœåŠ¡
- **ä¼˜åŠ¿**: æ›´å¼ºå¤§çš„NLPåº“æ”¯æŒ
- **æŠ€æœ¯æ ˆ**: FastAPI + spaCy + NLTK + transformers
- **é€šä¿¡**: HTTP APIæˆ–IPCé€šä¿¡
- **ç¼ºç‚¹**: éœ€è¦é¢å¤–çš„Pythonè¿è¡Œæ—¶

#### æ–¹æ¡ˆC: æ··åˆæ¶æ„
- **æ ¸å¿ƒ**: JavaScriptä¿æŒä¸Glassé›†æˆ
- **NLPå¤„ç†**: Pythonå¾®æœåŠ¡å¤„ç†å¤æ‚NLPä»»åŠ¡
- **é€šä¿¡**: WebSocketå®æ—¶é€šä¿¡

### å‰ç«¯UIæŠ€æœ¯æ ˆ
- **æ¡†æ¶**: React + TypeScript (ä¸ç°æœ‰ä¸€è‡´)
- **æ ·å¼**: Tailwind CSS (ä¸ç°æœ‰ä¸€è‡´)
- **å›¾è¡¨åº“**: D3.js + React-D3-Graph
- **åŠ¨ç”»**: Framer Motion
- **çŠ¶æ€ç®¡ç†**: React Context + useReducer

### æ•°æ®å­˜å‚¨æ‰©å±•
```sql
-- æ–°å¢æ•°æ®è¡¨ç»“æ„
CREATE TABLE translations (
    id INTEGER PRIMARY KEY,
    session_id TEXT,
    source_text TEXT,
    target_text TEXT,
    source_lang TEXT,
    target_lang TEXT,
    timestamp DATETIME,
    confidence REAL
);

CREATE TABLE keywords (
    id INTEGER PRIMARY KEY,
    session_id TEXT,
    keyword TEXT,
    importance_score REAL,
    context TEXT,
    timestamp DATETIME
);

CREATE TABLE glossary (
    id INTEGER PRIMARY KEY,
    term TEXT UNIQUE,
    definition TEXT,
    context TEXT,
    source TEXT,
    updated_at DATETIME
);

CREATE TABLE mindmap_nodes (
    id INTEGER PRIMARY KEY,
    session_id TEXT,
    node_id TEXT,
    content TEXT,
    parent_id TEXT,
    position_x REAL,
    position_y REAL,
    node_type TEXT,
    created_at DATETIME
);
```

## ğŸ¨ UI/UXè®¾è®¡

### å››è±¡é™å¸ƒå±€è®¾è®¡
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     â”‚                     â”‚
â”‚   Transcription     â”‚     Mind Map        â”‚
â”‚   + Translation     â”‚     Viewer          â”‚
â”‚                     â”‚                     â”‚
â”‚   [EN] Hello world  â”‚     â”Œâ”€ Main Topic   â”‚
â”‚   [ZH] ä½ å¥½ä¸–ç•Œ     â”‚     â”‚  â”œâ”€ Subtopic  â”‚
â”‚                     â”‚     â”‚  â””â”€ Action    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                     â”‚                     â”‚
â”‚   Keywords Panel    â”‚   Term Definitions  â”‚
â”‚                     â”‚                     â”‚
â”‚   ğŸ”¥ project (8.5)  â”‚   ğŸ“– API: Applicationâ”‚
â”‚   ğŸ”¥ meeting (7.2)  â”‚   Programming       â”‚
â”‚   ğŸ”¥ deadline (6.8) â”‚   Interface...      â”‚
â”‚                     â”‚                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### äº¤äº’è®¾è®¡
1. **å®æ—¶åŒæ­¥**: æ‰€æœ‰å››ä¸ªé¢æ¿å®æ—¶æ›´æ–°
2. **å…³é”®è¯ç‚¹å‡»**: ç‚¹å‡»å…³é”®è¯æ˜¾ç¤ºå®šä¹‰
3. **æ€ç»´å¯¼å›¾äº¤äº’**: æ‹–æ‹½ã€ç¼©æ”¾ã€å±•å¼€/æŠ˜å 
4. **è¯­è¨€åˆ‡æ¢**: å¿«é€Ÿåˆ‡æ¢ç¿»è¯‘è¯­è¨€å¯¹
5. **å¯¼å‡ºåŠŸèƒ½**: æ”¯æŒå¯¼å‡ºæ€ç»´å¯¼å›¾ã€æœ¯è¯­è¡¨

## ğŸ”Œ é›†æˆç­–ç•¥

### ä¸ç°æœ‰Glassç³»ç»Ÿé›†æˆ
1. **æ— ä¾µå…¥å¼é›†æˆ**: é€šè¿‡äº‹ä»¶ç³»ç»Ÿé›†æˆï¼Œä¸ä¿®æ”¹æ ¸å¿ƒSTTæµç¨‹
2. **é…ç½®é©±åŠ¨**: é€šè¿‡é…ç½®æ–‡ä»¶æ§åˆ¶æ–°åŠŸèƒ½å¼€å…³
3. **æ¸è¿›å¼å¯ç”¨**: æ”¯æŒå•ç‹¬å¯ç”¨/ç¦ç”¨å„ä¸ªå¢å¼ºåŠŸèƒ½
4. **å‘åå…¼å®¹**: ç¡®ä¿ä¸å½±å“åŸæœ‰åŠŸèƒ½

### äº‹ä»¶é›†æˆç‚¹
```javascript
// åœ¨ç°æœ‰ listenService.js ä¸­æ·»åŠ äº‹ä»¶å‘å°„
handleTranscriptionComplete(speaker, text) {
    // åŸæœ‰é€»è¾‘
    this.sendToRenderer('transcription-update', { speaker, text });
    
    // æ–°å¢ï¼šè§¦å‘å¢å¼ºåŠŸèƒ½
    if (this.enhancedFeaturesEnabled) {
        this.eventBridge.emit('enhanced:transcription', {
            speaker,
            text,
            timestamp: Date.now(),
            sessionId: this.currentSessionId
        });
    }
}
```

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–ç­–ç•¥

### å®æ—¶æ€§ä¿éšœ
1. **å¹¶è¡Œå¤„ç†**: ç¿»è¯‘ã€å…³é”®è¯æå–ã€ç»“æ„åˆ†æå¹¶è¡Œæ‰§è¡Œ
2. **å¢é‡æ›´æ–°**: åªå¤„ç†æ–°å¢çš„æ–‡æœ¬ç‰‡æ®µ
3. **æ™ºèƒ½ç¼“å­˜**: å¤šå±‚ç¼“å­˜ç­–ç•¥å‡å°‘é‡å¤è®¡ç®—
4. **å¼‚æ­¥å¤„ç†**: éé˜»å¡çš„åå°å¤„ç†

### å†…å­˜ç®¡ç†
1. **æ»‘åŠ¨çª—å£**: åªä¿æŒæœ€è¿‘çš„å¯¹è¯å†…å®¹åœ¨å†…å­˜ä¸­
2. **æ‡’åŠ è½½**: æŒ‰éœ€åŠ è½½å†å²æ•°æ®
3. **åƒåœ¾å›æ”¶**: å®šæœŸæ¸…ç†è¿‡æœŸç¼“å­˜

### ç½‘ç»œä¼˜åŒ–
1. **æ‰¹é‡ç¿»è¯‘**: åˆå¹¶çŸ­æ–‡æœ¬ç‰‡æ®µæ‰¹é‡ç¿»è¯‘
2. **æœ¬åœ°ä¼˜å…ˆ**: ä¼˜å…ˆä½¿ç”¨æœ¬åœ°NLPå¤„ç†
3. **é™çº§ç­–ç•¥**: APIå¤±è´¥æ—¶çš„å¤‡ç”¨æ–¹æ¡ˆ

## ğŸŒ Chromeæµè§ˆå™¨æ‰©å±•æ¶æ„

### Chromeæ‰©å±•ç»„ä»¶è®¾è®¡

#### 1. Manifest V3 é…ç½®
```json
{
  "manifest_version": 3,
  "name": "Glass Web Assistant",
  "version": "1.0.0",
  "description": "Glass learning assistant web extension",
  "permissions": [
    "activeTab",
    "storage",
    "scripting",
    "nativeMessaging"
  ],
  "host_permissions": [
    "http://*/*",
    "https://*/*"
  ],
  "background": {
    "service_worker": "background.js"
  },
  "content_scripts": [
    {
      "matches": ["<all_urls>"],
      "js": ["content.js"],
      "css": ["highlight.css"]
    }
  ],
  "action": {
    "default_popup": "popup.html"
  },
  "native_messaging": {
    "allowed_origins": ["chrome-extension://YOUR_EXTENSION_ID/"]
    }
}
```

#### 2. å†…å®¹è„šæœ¬ (Content Script)
```javascript
// chrome-extension/content.js
class GlassContentScript {
    constructor() {
        this.isActive = false;
        this.highlightElements = new Map();
        this.textProcessor = new WebTextProcessor();
    }

    // ç½‘é¡µå†…å®¹æå–
    extractPageContent() {
        const content = {
            title: document.title,
            url: window.location.href,
            text: this.extractMainText(),
            structure: this.analyzePageStructure(),
            timestamp: Date.now()
        };
        return content;
    }

    // é«˜äº®æ ‡è®°åŠŸèƒ½
    highlightText(keywords) {
        keywords.forEach(keyword => {
            this.highlightKeyword(keyword);
        });
    }

    // ä¸èƒŒæ™¯è„šæœ¬é€šä¿¡
    sendToBackground(action, data) {
        chrome.runtime.sendMessage({
            action: action,
            data: data
        });
    }
}
```

#### 3. èƒŒæ™¯æœåŠ¡ (Background Service)
```javascript
// chrome-extension/background.js
class GlassBackgroundService {
    constructor() {
        this.nativePort = null;
        this.isConnected = false;
    }

    // å»ºç«‹ä¸ä¸»ç¨‹åºçš„åŸç”Ÿæ¶ˆæ¯é€šä¿¡
    connectNativeApp() {
        this.nativePort = chrome.runtime.connectNative('com.pickle.glass.extension');
        
        this.nativePort.onMessage.addListener((message) => {
            this.handleNativeMessage(message);
        });

        this.nativePort.onDisconnect.addListener(() => {
            this.isConnected = false;
            console.log('Native app disconnected');
        });
    }

    // å¤„ç†æ¥è‡ªå†…å®¹è„šæœ¬çš„æ¶ˆæ¯
    handleContentMessage(message, sender, sendResponse) {
        switch(message.action) {
            case 'extractContent':
                this.sendToNativeApp('webContent', message.data);
                break;
            case 'highlight':
                this.sendHighlightToTab(sender.tab.id, message.data);
                break;
        }
    }

    // å‘é€æ•°æ®åˆ°ä¸»ç¨‹åº
    sendToNativeApp(type, data) {
        if (this.nativePort && this.isConnected) {
            this.nativePort.postMessage({
                type: type,
                data: data
            });
        }
    }
}
```

### Native Messaging é…ç½®

#### ä¸»ç¨‹åºç«¯Native Hosté…ç½®
```json
{
  "name": "com.pickle.glass.extension",
  "description": "Glass Web Extension Native Host",
  "path": "/Applications/Glass.app/Contents/MacOS/native-host",
  "type": "stdio",
  "allowed_origins": [
    "chrome-extension://YOUR_EXTENSION_ID/"
  ]
}
```

#### é€šä¿¡åè®®è®¾è®¡
```javascript
// æ¶ˆæ¯æ ¼å¼è§„èŒƒ
const MessageTypes = {
    // ä»æ‰©å±•åˆ°ä¸»ç¨‹åº
    WEB_CONTENT: 'webContent',        // ç½‘é¡µå†…å®¹æ•°æ®
    HIGHLIGHT_REQUEST: 'highlight',    // é«˜äº®è¯·æ±‚
    USER_ACTION: 'userAction',        // ç”¨æˆ·æ“ä½œ

    // ä»ä¸»ç¨‹åºåˆ°æ‰©å±•
    KEYWORDS: 'keywords',             // å…³é”®è¯åˆ—è¡¨
    DEFINITIONS: 'definitions',        // æœ¯è¯­å®šä¹‰
    HIGHLIGHT_DATA: 'highlightData'   // é«˜äº®æ•°æ®
};
```

### ç½‘é¡µå­¦ä¹ åœºæ™¯ä¼˜åŒ–

#### 1. åœ¨çº¿è¯¾ç¨‹æ”¯æŒ
- è§†é¢‘å¹³å°æ£€æµ‹ï¼ˆYouTube, Coursera, edXç­‰ï¼‰
- å­—å¹•æå–å’ŒåŒæ­¥
- è¯¾ç¨‹è¿›åº¦è·Ÿè¸ª
- ç¬”è®°å…³è”åŠŸèƒ½

#### 2. æ–‡æ¡£é˜…è¯»ä¼˜åŒ–
- PDFåœ¨çº¿é˜…è¯»å™¨æ”¯æŒ
- å­¦æœ¯è®ºæ–‡ç»“æ„è¯†åˆ«
- å‚è€ƒæ–‡çŒ®è‡ªåŠ¨æå–
- é˜…è¯»è¿›åº¦ä¿å­˜

#### 3. å¤šè¯­è¨€å­¦ä¹ åœºæ™¯
- è‡ªåŠ¨è¯­è¨€æ£€æµ‹
- å®æ—¶ç¿»è¯‘æ˜¾ç¤ºè¦†ç›–
- ç”Ÿè¯æœ¬åŠŸèƒ½
- è¯­è¨€å­¦ä¹ è¿›åº¦è¿½è¸ª

## ğŸ”— æ‰©å±•ä¸ä¸»ç¨‹åºé›†æˆ

### æ•°æ®åŒæ­¥ç­–ç•¥
```javascript
// åœ¨ç°æœ‰ listenService.js ä¸­æ·»åŠ Webæ‰©å±•æ”¯æŒ
handleWebContent(webData) {
    // åŸæœ‰éŸ³é¢‘å¤„ç†é€»è¾‘
    this.sendToRenderer('transcription-update', audioData);
    
    // æ–°å¢ï¼šå¤„ç†Webå†…å®¹
    if (this.enhancedFeaturesEnabled && webData) {
        this.eventBridge.emit('enhanced:webContent', {
            content: webData.text,
            url: webData.url,
            timestamp: Date.now(),
            sessionId: this.currentSessionId
        });
    }
}
```

### ç»Ÿä¸€çš„å¢å¼ºåŠŸèƒ½è§¦å‘
```javascript
// ç»Ÿä¸€å¤„ç†éŸ³é¢‘å’ŒWebå†…å®¹
onContentUpdate(source, data) {
    // source: 'audio' | 'web'
    // å¹¶è¡Œè§¦å‘æ‰€æœ‰å¢å¼ºåŠŸèƒ½
    this.emit('translation:process', data);
    this.emit('keywords:extract', data);
    this.emit('glossary:analyze', data);
    this.emit('mindmap:update', data);
    
    // Webç‰¹å®šå¤„ç†
    if (source === 'web') {
        this.emit('webextension:highlight', data);
    }
}
```

æ­¤æ¶æ„è®¾è®¡ç¡®ä¿äº†æ–°åŠŸèƒ½çš„é«˜åº¦æ¨¡å—åŒ–ã€å¯æ‰©å±•æ€§å’Œä¸ç°æœ‰ç³»ç»Ÿçš„æ— ç¼é›†æˆï¼ŒåŒæ—¶æ–°å¢çš„Chromeæµè§ˆå™¨æ‰©å±•åŠŸèƒ½ä¸ºç½‘é¡µå­¦ä¹ åœºæ™¯æä¾›äº†å¼ºå¤§çš„æ”¯æŒã€‚