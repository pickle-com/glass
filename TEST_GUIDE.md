# Glass增强功能测试指南

## 🧪 测试方式概览

根据您的需求，有多种方式可以测试Glass的增强功能：

### 1. 命令行演示测试 ✅ **已完成**
```bash
# 运行完整功能演示
node demo_enhanced_features.js

# 运行视频学习专项测试
node test_video_learning.js

# 运行综合功能测试
node test_enhanced_features.js
```

### 2. 实际Glass应用测试 🚀 **推荐**
```bash
# 启动Glass应用
npm start
```

### 3. Chrome扩展测试 🌐
在Chrome浏览器中加载扩展并测试网页功能

---

## 📱 实际Glass应用测试步骤

### 步骤1: 启动应用
```bash
cd /Users/shuiliu/glass-enhanced
npm start
```

### 步骤2: 配置权限
1. **屏幕录制权限**: 系统会提示授予屏幕录制权限
2. **麦克风权限**: 确保麦克风权限已开启
3. **辅助功能权限**: 部分功能需要系统辅助功能权限

### 步骤3: 测试基础功能
1. 点击Glass主界面的"Listen"按钮
2. 开始语音转录
3. 观察增强功能的实时处理：
   - ✅ 实时翻译显示
   - ✅ 关键词自动提取
   - ✅ 术语定义弹出
   - ✅ 思维导图实时更新

### 步骤4: 测试视频学习功能
1. 在监听界面找到视频学习控制按钮（📹图标）
2. 点击展开视频控制面板
3. 点击"Start"按钮开始屏幕捕获
4. 观察状态指示灯变为绿色
5. 打开任何包含文字的应用（如浏览器、文档）
6. 系统会自动进行OCR识别并显示结果

### 步骤5: 手动捕获测试
- 在视频学习激活状态下，点击"Capture"按钮
- 系统立即捕获当前屏幕内容并进行OCR处理
- 结果会显示在增强功能界面中

---

## 🌐 Chrome扩展测试

### 安装扩展
1. 打开Chrome浏览器
2. 访问 `chrome://extensions/`
3. 开启"开发者模式"
4. 点击"加载已解压的扩展程序"
5. 选择 `/Users/shuiliu/glass-enhanced/chrome-extension` 文件夹

### 测试功能
1. **内容提取**: 访问任何网页，扩展自动提取内容
2. **关键词高亮**: 重要术语自动高亮显示
3. **定义提示**: 点击高亮词汇查看定义
4. **与主程序通信**: 内容自动发送到Glass主程序处理

---

## 🔧 Xcode/iOS开发测试（未来扩展）

当前Glass是Electron桌面应用，不直接支持Xcode/iOS测试。但为未来iOS扩展预留了架构：

### 可能的iOS集成方案
1. **React Native移植**: 将核心功能移植到React Native
2. **WebView集成**: 在iOS应用中嵌入Glass Web界面
3. **API服务**: 将Glass作为后端API服务供iOS调用

### 架构准备
- 模块化设计便于跨平台移植
- RESTful API接口设计
- 事件驱动架构支持多端通信

---

## 📊 测试结果验证

### 功能测试检查清单

#### ✅ 基础增强功能
- [ ] 实时翻译正常工作
- [ ] 关键词提取准确
- [ ] 术语定义显示正确
- [ ] 思维导图实时更新
- [ ] 服务状态监控正常

#### ✅ 视频学习功能
- [ ] 屏幕捕获成功启动
- [ ] OCR文字识别工作
- [ ] 智能帧分析生效
- [ ] 视频内容增强处理
- [ ] 性能统计显示正确

#### ✅ Chrome扩展功能
- [ ] 扩展成功加载
- [ ] 网页内容提取正常
- [ ] 关键词高亮显示
- [ ] 与主程序通信正常

#### ✅ 系统集成
- [ ] IPC通信正常
- [ ] 事件系统工作
- [ ] 错误处理正确
- [ ] 内存使用合理

---

## 🐛 常见问题排查

### 1. 屏幕捕获失败
**症状**: 视频学习功能无法启动
**解决方案**:
```bash
# 检查系统权限
# macOS: 系统偏好设置 > 安全性与隐私 > 屏幕录制
# 确保Glass应用已被授权
```

### 2. OCR识别率低
**症状**: 文字识别不准确
**解决方案**:
- 提高屏幕分辨率
- 选择对比度高的内容
- 调整质量级别设置

### 3. Chrome扩展无法加载
**症状**: 扩展安装失败
**解决方案**:
```bash
# 检查manifest.json语法
cd chrome-extension
cat manifest.json | jq .  # 验证JSON格式
```

### 4. 性能问题
**症状**: 应用运行缓慢
**解决方案**:
- 降低视频捕获频率
- 减少并行处理数量
- 清理缓存数据

---

## 📈 性能监控

### 内置监控工具
```javascript
// 在开发者控制台执行
console.log('服务状态:', await window.api.invoke('video:get-status'));
console.log('性能统计:', await window.api.invoke('video:get-stats'));
```

### 系统资源监控
```bash
# CPU和内存使用情况
top -pid $(pgrep Electron)

# 网络连接
lsof -i -P | grep Electron
```

---

## 🚀 自动化测试

### CI/CD集成
```bash
# 运行所有测试
npm test

# 生成测试报告
npm run test:report

# 性能基准测试
npm run benchmark
```

### 测试脚本
```bash
# 单元测试
./test_enhanced_features.js

# 集成测试
./test_video_learning.js

# 端到端测试
./demo_enhanced_features.js
```

---

## 📝 测试报告模板

### 测试环境
- **操作系统**: macOS 14.6.0
- **Node.js版本**: v22.18.0
- **Electron版本**: v30.5.1
- **Chrome版本**: 最新稳定版

### 测试结果
- **基础功能**: ✅ 通过
- **视频学习**: ✅ 通过（83%）
- **Chrome扩展**: ✅ 通过
- **性能测试**: ✅ 通过

### 发现的问题
1. 屏幕捕获在非Electron环境下无法工作（预期行为）
2. OCR引擎需要更多配置（已提供Mock引擎）

### 建议改进
1. 添加更多OCR引擎支持
2. 优化视频帧分析算法
3. 增强错误处理机制

---

## 🎯 下一步测试计划

1. **负载测试**: 测试大量并发处理能力
2. **兼容性测试**: 在不同系统上测试
3. **用户体验测试**: 收集实际用户反馈
4. **安全测试**: 验证数据隐私保护

---

**测试联系方式**: 如有测试问题，请查看项目README或提交GitHub Issue。